<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Library · Tractography in Julia</title><meta name="title" content="Library · Tractography in Julia"/><meta property="og:title" content="Library · Tractography in Julia"/><meta property="twitter:title" content="Library · Tractography in Julia"/><meta name="description" content="Documentation for Tractography in Julia."/><meta property="og:description" content="Documentation for Tractography in Julia."/><meta property="twitter:description" content="Documentation for Tractography in Julia."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Tractography in Julia</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../getstart/">Getting started</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../fcup/">FCUP</a></li><li><a class="tocitem" href="../gpu/">GPU example</a></li></ul></li><li><a class="tocitem" href="../algos/">Algorithms</a></li><li><a class="tocitem" href="../plot/">Plotting</a></li><li class="is-active"><a class="tocitem" href>Library</a><ul class="internal"><li><a class="tocitem" href="#Misc"><span>Misc</span></a></li><li><a class="tocitem" href="#sheval"><span>Spherical harmonics evaluation strategy</span></a></li><li><a class="tocitem" href="#Models"><span>Models</span></a></li><li><a class="tocitem" href="#Algorithms"><span>Algorithms</span></a></li><li><a class="tocitem" href="#Sampling"><span>Sampling</span></a></li><li><a class="tocitem" href="#Plotting"><span>Plotting</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Library</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Library</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/rveltz/Tractography.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/rveltz/Tractography.jl/blob/master/docs/src/library.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Library"><a class="docs-heading-anchor" href="#Library">Library</a><a id="Library-1"></a><a class="docs-heading-anchor-permalink" href="#Library" title="Permalink"></a></h1><ul><li><a href="#Library">Library</a></li><li class="no-marker"><ul><li><a href="#Misc">Misc</a></li><li><a href="#sheval">Spherical harmonics evaluation strategy</a></li><li><a href="#Models">Models</a></li><li><a href="#Algorithms">Algorithms</a></li><li><a href="#Sampling">Sampling</a></li><li><a href="#Plotting">Plotting</a></li></ul></li></ul><h2 id="Misc"><a class="docs-heading-anchor" href="#Misc">Misc</a><a id="Misc-1"></a><a class="docs-heading-anchor-permalink" href="#Misc" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.Cone" href="#Tractography.Cone"><code>Tractography.Cone</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Cone{𝒯&lt;:Real}</code></pre><p>Structure to encode a cone to limit sampling the direction.  This ensures that the angle in degrees between to consecutive streamline directions is less than <code>angle</code>.</p><p>The implemented condition is for <code>cn = Cone(angle)</code></p><pre><code class="language-julia hljs">(cn::Cone)(d1, d2) = dot(d1, d2) &gt; cosd(cn.alpha)</code></pre><p><strong>Fields</strong></p><ul><li><code>alpha::Real</code>: half section angle in degrees</li></ul><p><strong>Constructor</strong></p><p><code>Cone(angle)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/tmc.jl#L128">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography._apply_mask!" href="#Tractography._apply_mask!"><code>Tractography._apply_mask!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_apply_mask!(model, mask)
</code></pre><p>Multiply the mask which is akin to a matrix of <code>Bool</code> with same size as the data stored in <code>model</code>. Basically, the mask <code>mask[ix, iy, iz]</code> ensures whether the voxel <code>(ix, iy, iz)</code> is discarded or not.</p><p><strong>Arguments</strong></p><ul><li><code>model::TMC</code>.</li><li><code>mask</code> can be a <code>AbstractArray{3, Bool}</code> or a <code>NIVolume</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/tmc.jl#L219">source</a></section></article><div class="admonition is-warning" id="Missing-docstring.-ffdc786fd909a1e8"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-ffdc786fd909a1e8" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>Tractography.save_streamlines</code>. Check Documenter&#39;s build log for details.</p></div></div><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.Exp𝕊²" href="#Tractography.Exp𝕊²"><code>Tractography.Exp𝕊²</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Exp𝕊²(p, X, t)
</code></pre><p>Exponential map on the sphere.</p><p>We assume that t&gt;0</p><p>See https://github.com/JuliaManifolds/ManifoldsBase.jl/blob/5c4a61ed3e5e44755a22f7872cb296a621905f87/test/ManifoldsBaseTestUtils.jl#L63</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/diffusion.jl#L1">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.spherical_to_euclidean" href="#Tractography.spherical_to_euclidean"><code>Tractography.spherical_to_euclidean</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">spherical_to_euclidean(θ, ϕ)
</code></pre><p>Transform spherical to cartesian coordinates.</p><p>Recall that t∈[0, π] and p∈[0, 2π]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/utils.jl#L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.euclidean_to_spherical" href="#Tractography.euclidean_to_spherical"><code>Tractography.euclidean_to_spherical</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">euclidean_to_spherical(x, y, z)
</code></pre><p>Transform cartesian to spherical coordinates. Assume that the vector has norm one.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/utils.jl#L29">source</a></section></article><h2 id="sheval"><a class="docs-heading-anchor" href="#sheval">Spherical harmonics evaluation strategy</a><a id="sheval-1"></a><a class="docs-heading-anchor-permalink" href="#sheval" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.PlottingSH" href="#Tractography.PlottingSH"><code>Tractography.PlottingSH</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct PlottingSH &lt;: Tractography.AbstractSPHEvaluation</code></pre><p>Set up for plotting ODF.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/tmc.jl#L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.PreComputeAllODF" href="#Tractography.PreComputeAllODF"><code>Tractography.PreComputeAllODF</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct PreComputeAllODF &lt;: Tractography.AbstractSPHEvaluation</code></pre><p>Spherical harmonics evaluation based on Fibonacci sampling. All ODF are pre-computed once and saved in a cache. Their positivity is enforced with a <code>max(0,⋅)</code> or a mollifier. </p><div class="admonition is-danger" id="Danger-599e113a65220611"><header class="admonition-header">Danger<a class="admonition-anchor" href="#Danger-599e113a65220611" title="Permalink"></a></header><div class="admonition-body"><p>Requires a relatively large memory!</p></div></div><p><strong>Details</strong></p><p>If you have <code>na</code> angles for sampling the unit sphere and the data is of size <code>(nx, ny, nz, nsph)</code>, it yields a matrix of dimensions <code>(nx, ny, nz, na)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/tmc.jl#L21">source</a></section></article><h2 id="Models"><a class="docs-heading-anchor" href="#Models">Models</a><a id="Models-1"></a><a class="docs-heading-anchor-permalink" href="#Models" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.TMC" href="#Tractography.TMC"><code>Tractography.TMC</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct TMC{𝒯, 𝒯alg&lt;:Tractography.AbstractSPHEvaluation, 𝒯d, 𝒯C, 𝒯mol}</code></pre><p>Tractography Markov Chain (TMC).</p><p><strong>Fields (with default values):</strong></p><ul><li><p><code>Δt::Any</code>: Step size of the TMC. Default: 0.1</p></li><li><p><code>evaluation_algo::Tractography.AbstractSPHEvaluation</code>: Spherical harmonics evaluation algorithm. Can be <code>FibonacciSH(), PreComputeAllODF()</code>. Default: PreComputeAllODF()</p></li><li><p><code>odfdata::Any</code>: ODF data from nifti file. Must be the list of ODF in the base of spherical harmonics. Hence, it should be an (abstract) 4d array. Default: nothing</p></li><li><p><code>cone::Any</code>: Cone function to restrict angle diffusion. You can use a <code>Cone</code> or a custom function <code>(d1, d2) -&gt; return_a_boolean</code>. Default: Cone(90.0f0)</p></li><li><p><code>proba_min::Any</code>: Probability below which we stop tracking. Default: 0.0</p></li><li><p><code>mollifier::Any</code>: Mollifier, used to make the fodf non negative. During odf evaluation, we effectively use <code>mollifier(fodf[i,j,k,angle])</code>. Default: default_mollifier</p></li></ul><p><strong>Methods</strong></p><ul><li><code>_apply_mask!(model, mask)</code> apply a mask to the raw SH tensor. See its doc string.</li><li><code>_getdata(model)</code> return the fodf data associated with the TMC.</li><li><code>size(model)</code> return <code>nx, ny, nz, nt</code>.</li><li><code>eltype(model)</code> return the scalar type of the data (default Float64).</li><li><code>get_lmax(model)</code> return the max <code>l</code> coordinate in of spherical harmonics.</li></ul><p><strong>Constructors (use the fields!)</strong></p><ul><li><code>TMC()</code></li><li><code>TMC(Δt = 0.1f0)</code> for a Float32 TMC</li><li><code>TMC(Δt = 0.1, proba_min = 0.)</code> for a Float64 TMC. You need to specify both fields <code>Δt</code> and <code>proba_min</code></li><li><code>TMC(odfdata = rand(10,10,10,45))</code> for custom ODF</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/tmc.jl#L154">source</a></section></article><h2 id="Algorithms"><a class="docs-heading-anchor" href="#Algorithms">Algorithms</a><a id="Algorithms-1"></a><a class="docs-heading-anchor-permalink" href="#Algorithms" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.Deterministic" href="#Tractography.Deterministic"><code>Tractography.Deterministic</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Deterministic &lt;: Tractography.DeterministicSampler</code></pre><p>Tractography sampling performed with the argmax function. Can be used with <code>FibonacciSH</code> and <code>PreComputeAllODF</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/tmc.jl#L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.Probabilistic" href="#Tractography.Probabilistic"><code>Tractography.Probabilistic</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Probabilistic &lt;: Tractography.AbstractNotPureRejectionSampler</code></pre><p>Tractography sampling performed with the cumulative sum distribution. Can be used with <code>FibonacciSH</code> and <code>PreComputeAllODF</code>.</p><p><strong>Constructor</strong></p><p><code>Probabilistic()</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/tmc.jl#L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.Diffusion" href="#Tractography.Diffusion"><code>Tractography.Diffusion</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Diffusion{Ta, T, Tk, Tmol, Tdmol} &lt;: Tractography.AbstractSampler</code></pre><p>Tractography sampling performed with diffusive model. Basically, the streamlines (Xₜ)ₜ are solution of the SDE</p><p>dXₜ = γ * drift dt + γ_noise * √γ * dnoiseₜ</p><p><strong>Arguments (with default values):</strong></p><ul><li><p><code>alg_sde::Any</code>: SciML algorithm used to simulate the tractography diffusion process. Default: nothing</p></li><li><p><code>γ::Any</code>: γ parameter of the diffusion process. Default: 1.0</p></li><li><p><code>γ_noise::Any</code>: parameter of the diffusion process to scale the variance. Default: 1.0</p></li><li><p><code>kw_sde::Any</code>: keyword arguments passed to alg_sde. Default: nothing</p></li><li><p><code>mollifier::Any</code>: mollifier. Default: Base.Fix2(softplus, 10)</p></li><li><p><code>d_mollifier::Any</code>: differential of mollifier. Default: Base.Fix2(∂softplus, 10)</p></li><li><p><code>adaptive::Bool</code>: Fixed time step? Default: false</p></li></ul><p><strong>Constructor</strong></p><p>Example for <code>Float32</code>: <code>Diffusion(γ = 1f0)</code>. If you want <code>Float64</code>, you have to pass the two scalars</p><pre><code class="language-julia hljs">```Diffusion(γ = 1.0, γ_noise = 1.0)```</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/tmc.jl#L75">source</a></section></article><h2 id="Sampling"><a class="docs-heading-anchor" href="#Sampling">Sampling</a><a id="Sampling-1"></a><a class="docs-heading-anchor-permalink" href="#Sampling" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.init" href="#Tractography.init"><code>Tractography.init</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">init(
    model::TMC{𝒯},
    alg;
    n_sphere,
    𝒯ₐ
) -&gt; Tractography.ThreadedCache{_A, Nothing, _B, Nothing, Nothing} where {_A, _B}
</code></pre><p>Create a cache for computing streamlines in batches. This is interesting for use of memory limited environments (e.g. on GPU).</p><div class="admonition is-success" id="Tip-b9782c3514698de7"><header class="admonition-header">Tip<a class="admonition-anchor" href="#Tip-b9782c3514698de7" title="Permalink"></a></header><div class="admonition-body"><p>Use it with <code>sample!</code></p></div></div><p><strong>Arguments</strong></p><ul><li><code>alg</code> sampling algorithm, <code>Deterministic, Probabilistic, Diffusion</code>, etc.</li><li><code>n_sphere::Int = 400</code> number of points to discretize the sphere on which we evaluate the spherical harmonics.</li><li><code>𝒯ₐ = Array{𝒯}</code> specify the type of the arrays in the cache. If passed a GPU array type like <code>CuArray</code> for CUDA, the sampling occurs on the GPU. Leave it for computing on CPU.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/gpu.jl#L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.sample" href="#Tractography.sample"><code>Tractography.sample</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sample(
    model::TMC{𝒯},
    alg::Tractography.AbstractSampler,
    seeds::AbstractArray{𝒯, 2};
    ...
) -&gt; Tuple{Any, Any}
sample(
    model::TMC{𝒯},
    alg::Tractography.AbstractSampler,
    seeds::AbstractArray{𝒯, 2},
    mask::Union{Nothing, AbstractArray{Bool}};
    nt,
    n_sphere,
    maxodf_start,
    reverse_direction,
    nthreads,
    gputhreads,
    saveat
) -&gt; Tuple{Any, Any}
</code></pre><p>Sample the TMC <code>model</code>.</p><p><strong>Arguments</strong></p><ul><li><code>model::TMC</code></li><li><code>alg</code> sampling algorithm, <code>Deterministic, Probabilistic, Diffusion, etc</code>.</li><li><code>seeds</code> matrix of size <code>6 x Nmc</code> where <code>Nmc</code> is the number of Monte-Carlo simulations to be performed.</li><li><code>mask = nothing</code> matrix of boolean where to stop computation. See also <code>_apply_mask</code>.</li></ul><p><strong>Optional arguments</strong></p><ul><li><code>nt::Int</code> maximal number of steps to compute each streamline.</li><li><code>n_sphere::Int = 400</code> number of points to discretize the sphere on which we evaluate the spherical harmonics.</li><li><code>maxodf_start::Bool</code> for each locations, use direction provided by the argmax of the ODF.</li><li><code>reverse_direction::Bool</code> reverse initial direction.</li><li><code>nthreads::Int = 8</code> number of threads on CPU.</li><li><code>gputhreads::Int = 512</code> number of threads on GPU.</li><li><code>saveat::Int</code> record the streamline every <code>saveat</code> step. Only available for <code>alg &lt;: Diffusion</code>.</li></ul><p><strong>Output</strong></p><ul><li><code>streamlines</code> with shape <code>3 x nt x Nmc</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/sample.jl#L40">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.sample!" href="#Tractography.sample!"><code>Tractography.sample!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sample!(
    streamlines,
    streamlines_length,
    model::TMC{𝒯},
    cache::Tractography.AbstractCache,
    alg,
    seeds;
    maxodf_start,
    reverse_direction,
    nthreads,
    gputhreads,
    nₜ,
    saveat,
    𝒯ₐ
) -&gt; Any
</code></pre><p>Sample the TMC <code>model</code> inplace by overwriting <code>result</code>. This requires very little memory and can be run indefinitely on the GPU for example.</p><p><strong>Arguments</strong></p><ul><li><code>streamlines</code> array with shape <code>3 x nt x Nmc</code>. <code>nt</code> is maximal length of each streamline. <code>Nmc</code> is the number of Monte-Carlo simulations to be performed.</li><li><code>streamlines_length</code> length of the streamlines</li><li><code>model::TMC</code> </li><li><code>alg</code> sampling algorithm, <code>Deterministic, Probabilistic, Diffusion, etc</code>.</li><li><code>seeds</code> matrix of size <code>6 x Nmc</code> where <code>Nmc</code> is the number of Monte-Carlo simulations to be performed.</li></ul><p><strong>Optional arguments</strong></p><ul><li><code>maxodf_start::Bool</code> for each locations, use direction provided by the argmax of the ODF.</li><li><code>reverse_direction::Bool</code> reverse initial direction.</li><li><code>nthreads::Int = 8</code> number of threads on CPU.</li><li><code>gputhreads::Int = 512</code> number of threads on GPU.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/src/gpu.jl#L38">source</a></section></article><h2 id="Plotting"><a class="docs-heading-anchor" href="#Plotting">Plotting</a><a id="Plotting-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting" title="Permalink"></a></h2><div class="admonition is-warning" id="Missing-docstring.-6f1f1d24b370b829"><header class="admonition-header">Missing docstring.<a class="admonition-anchor" href="#Missing-docstring.-6f1f1d24b370b829" title="Permalink"></a></header><div class="admonition-body"><p>Missing docstring for <code>Tractography.plot_streamlines</code>. Check Documenter&#39;s build log for details.</p></div></div><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.plot_streamlines!" href="#Tractography.plot_streamlines!"><code>Tractography.plot_streamlines!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">plot_streamlines!(ax, streamlines; k...)
</code></pre><p>Plot the streamlines.</p><p>The optional parameters are passed to <code>lines!</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/ext/MakieExt/plot.jl#L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.plot_odf!" href="#Tractography.plot_odf!"><code>Tractography.plot_odf!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">plot_odf!(ax, model; n_sphere, radius, st, I, J, K, c0min)
</code></pre><p>Plot the the ODF with glyphs.</p><p><strong>See also</strong></p><ul><li><code>plot_odf(model; kwargs...)</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>model::TMC</code></li><li><code>I, J, K</code> range for displaying the ODF. Some of them can be a single element, like <code>K = 40:40</code>.</li><li><code>radius</code> radius of the glyph.</li><li><code>st = 4</code> stride, only show one over <code>st</code> glyph in each direction.</li></ul><p><strong>Optional arguments</strong></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/ext/MakieExt/plot.jl#L173">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Tractography.plot_slice" href="#Tractography.plot_slice"><code>Tractography.plot_slice</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">plot_slice(model; k...)
</code></pre><p>Plot a slice of the data.</p><p><strong>See also</strong></p><ul><li><code>plot_slice!</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>model::TMC</code></li></ul><p><strong>Optional arguments</strong></p><ul><li><code>odf::Bool</code> display the ODF with glyphs.</li><li><code>slice::Bool</code> display the brain slice from mean ODF value.</li><li><code>interpolate::Bool</code> interpolate the brain slice (reduces pixelization).</li><li><code>alpha</code> alpha value for brain slice.</li><li><code>I,J,K</code> range for displaying the ODF. One of them should be a single element, like <code>K = 40:40</code>.</li><li><code>st::Int = 2</code></li><li><code>c0min</code> minimum mean ODF value for plotting the glyph.</li><li><code>n_theta::Int</code> number of points for showing the glyphs.</li><li><code>radius = 0.1</code> radius of the glyphs.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rveltz/Tractography.jl/blob/6356332f782a85980d06ba26a3536959bb474088/ext/MakieExt/plot.jl#L274">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../plot/">« Plotting</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Sunday 12 October 2025 07:28">Sunday 12 October 2025</span>. Using Julia version 1.12.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body><div data-docstringscollapsed="true"></div></html>
